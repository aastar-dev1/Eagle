<ng-container *ngIf="!previewIdentifier">
  <ws-auth-editor-action-buttons (action)="action($event)" [buttonConfig]="actionButton">
  </ws-auth-editor-action-buttons>
  <div *ngIf="mediumScreen">
    <div class="ui" [ngClass]="{ toHide: !leftArrow }">
      <button class="p-1" mat-icon-button (click)="sidenav.toggle(); leftArrow = !leftArrow" i18n-aria-label
        aria-label="Open side panel" i18n-matTooltip matTooltipPosition="right" matTooltip="Open side panel">
        <mat-icon>keyboard_arrow_right</mat-icon>
      </button>
    </div>
  </div>
  <mat-sidenav-container autosize="true" id="auth-toc" class="example-container">
    <mat-sidenav #sidenav [mode]="mode$ | async" [(opened)]="sideBarOpened">
      <div class="sticky">
        <!-- <ws-auth-table-of-contents
    (action)="subAction($event)"
    (closeEvent)="sidenav.toggle(); leftArrow = !leftArrow"
  ></ws-auth-table-of-contents> -->

        <ws-author-auth-toc (action)="subAction($event)" (closeEvent)="sidenav.toggle(); leftArrow = !leftArrow"
          [createdFromCourse]="couseCreated" >
        </ws-author-auth-toc>

        <!-- <div class="sticky">
          <ws-auth-table-of-contents
            (action)="subAction($event)"
            (closeEvent)="sidenav.toggle(); leftArrow = !leftArrow"
          ></ws-auth-table-of-contents>
        </div> -->
        <div class="margin-left-l">
          <a class="flex flex-middle margin-left-l" (click)="showAddchapter = true"><span class="material-icons">
              add
            </span>
            <p class="margin-left-xs margin-remove-bottom cursor-pointer">Add Topic</p>
          </a>

        </div>
      </div>
    </mat-sidenav>
    <mat-sidenav-content class="pl-6 pr-6 ml-6">



      <form [formGroup]="createTopicForm" *ngIf="showAddchapter">
        <div class="margin-top-s">
          <h1>Build your course by adding Topics</h1>
          <p>Add your content, quizzes, discussions and publish</p>
          <p class="required margin-remove-bottom">
            Hi, Lets start with a chapter name
          </p>
          <div class="margin-top-xs width-3-5">
          <mat-form-field appearance="outline" class="margin-top-xs width-1-4">
            <input matInput i18n-placeholder placeholder="Topic Name" formControlName="topicName" />
          </mat-form-field>
        </div>
        <div class="margin-top-xs width-3-5">
          <mat-form-field appearance="outline" class="margin-top-xs width-1-4">
            <textarea matInput i18n-placeholder placeholder="Topic Description" formControlName="topicDescription" >
            </textarea>
          </mat-form-field>
        </div>
        </div>
        <!-- createTopicForm ==>{{createTopicForm.valid}} -->
        <div class="example-button-container">
          <button mat-fab color="primary" [disabled]="!createTopicForm.valid" [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
            <mat-icon>add</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <!-- <button mat-menu-item (click)="setContentType('collection')">
              <mat-icon>book</mat-icon>
              <span>Topic</span>
            </button> -->
            <button mat-menu-item (click)="setContentType('assessment')">
              <mat-icon>check_circle</mat-icon>
              <span>Add Assessment</span>
            </button>          
            <button mat-menu-item (click)="setContentType('web')">
              <mat-icon>link</mat-icon>
              <span>Attach a link</span>
            </button>
            <button mat-menu-item (click)="setContentType('upload')">
              <mat-icon>cloud_upload</mat-icon>
              <span>Upload content</span>
            </button>
            <button mat-menu-item (click)="setContentType('web')">
              <mat-icon>insert_drive_file</mat-icon>
              <span>Web Page</span>
            </button>
            
          </mat-menu>
        </div>

      </form>

      <!-- <ng-container ></ng-container> -->
      <ws-auth-edit-meta [parentContent]="currentParentId"
      [isSubmitPressed]="isSubmitPressed" (data)="action($event)" *ngIf="!showAddchapter && viewMode === 'meta'"></ws-auth-edit-meta>

      <!--  [class.hidden]="viewMode !== 'meta'" -->
      
      <ws-auth-edit-meta [parentContent]="currentParentId"
        [isSubmitPressed]="isSubmitPressed" (data)="action($event)" *ngIf="!showAddchapter && viewMode !== 'meta'"></ws-auth-edit-meta>
        <!-- viewMode==>{{viewMode}} -->
      <ws-auth-url-upload [isCollectionEditor]="true" *ngIf="!showAddchapter && viewMode === 'curate'" [isSubmitPressed]="isSubmitPressed"
        (data)="action($event)"></ws-auth-url-upload>
      <ws-auth-file-upload [isCollectionEditor]="true" *ngIf="!showAddchapter && viewMode === 'upload'" [isSubmitPressed]="isSubmitPressed"
        (data)="action($event)">
      </ws-auth-file-upload>
      <ws-auth-quiz [isCollectionEditor]="true" *ngIf="!showAddchapter && viewMode === 'assessment'" [isSubmitPressed]="isSubmitPressed"
      (data)="action($event)"></ws-auth-quiz>






    </mat-sidenav-content>

  </mat-sidenav-container>
</ng-container>


<div *ngIf="previewIdentifier">
  <mat-icon (click)="closePreview()" class="close-preview" matTooltip="Back"
    i18n-matTooltip="Back button to go to previous page">
    arrow_back</mat-icon>
  <ws-auth-viewer [identifier]="previewIdentifier" [mimeTypeRoute]="mimeTypeRoute"></ws-auth-viewer>
</div>

<!-- <mat-sidenav-container class="nav-container">



</mat-sidenav-container> -->